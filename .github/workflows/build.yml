name: Build and run the Hello World apps
on:
  push:
    branches: [ "*" ]
  pull_request:
    branches: [ master ]
jobs:
  build-linux:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2

    - name: Build And Install Newton
      run: |
        cd newton-4.00
        cmake -S . -B build/ -DNEWTON_BUILD_SANDBOX_DEMOS=OFF
        cmake --build build -j2
        sudo cmake --build build --target install

    - name: Build And Run Hello World Apps
      run: |
        cp -r newton-4.00/applications/hello-world /tmp/myapp
        cd /tmp/myapp
        cmake -S . -B build/
        cmake --build build/
        echo ""

    - name: Run Hello World Demo
      run: |
        /tmp/myapp/build/hello

    - name: Run Transform Callback Demo
      run: |
        /tmp/myapp/build/transformCallback

    - name: Run Contact Callback Demo
      run: |
        /tmp/myapp/build/contactCallback
